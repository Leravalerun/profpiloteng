<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Crypto Test â€” ProfPilot</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900 p-8">
  
  <div class="max-w-2xl mx-auto">
    <h1 class="text-3xl font-bold text-slate-900 mb-8">Crypto Selection Test</h1>
    
    <!-- Crypto Options -->
    <div class="mb-6">
      <p class="text-slate-600 mb-4">Choose your cryptocurrency:</p>
      <div id="crypto-options" class="space-y-3">
        <!-- Crypto options will be populated by JavaScript -->
      </div>
    </div>

    <!-- Payment Details (Hidden initially) -->
    <div id="payment-details" class="hidden bg-white p-6 rounded-lg border">
      <h3 class="font-semibold text-slate-900 mb-4">Payment Details</h3>
      
      <div class="space-y-3 text-sm">
        <div class="flex justify-between">
          <span class="text-slate-600">Amount:</span>
          <span id="crypto-amount" class="font-medium">29.00 USDT</span>
        </div>
        <div class="flex justify-between">
          <span class="text-slate-600">Network:</span>
          <span id="crypto-network" class="font-medium">TRC20</span>
        </div>
        <div class="flex justify-between">
          <span class="text-slate-600">Exchange Rate:</span>
          <span id="exchange-rate" class="font-medium">1 USDT = $1.00</span>
        </div>
      </div>

      <!-- Wallet Address -->
      <div class="mt-4">
        <label class="block text-sm font-medium text-slate-700 mb-2">Send payment to this address:</label>
        <div class="flex gap-2">
          <input 
            type="text" 
            id="wallet-address" 
            readonly 
            class="flex-1 px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-sm font-mono"
            value="TKbgFCRNwJ7R8XNVUzP7472n5tGuaiqoD7"
          >
          <button 
            id="copy-address" 
            class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"
          >
            Copy
          </button>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="mt-6 space-y-3">
        <button 
          id="check-payment" 
          class="w-full bg-blue-600 text-white py-3 px-4 rounded-xl font-semibold hover:bg-blue-700 transition-colors"
        >
          Check Payment Status
        </button>
        
        <button 
          id="continue-simulator" 
          class="w-full bg-green-600 text-white py-3 px-4 rounded-xl font-semibold hover:bg-green-700 transition-colors hidden"
        >
          Continue to Simulator
        </button>
      </div>
    </div>

    <!-- Debug Info -->
    <div class="mt-8 bg-gray-100 p-4 rounded-lg">
      <h3 class="font-semibold mb-2">Debug Info:</h3>
      <div id="debug-info" class="text-sm text-gray-600">
        <!-- Debug info will be shown here -->
      </div>
    </div>
  </div>

  <script>
    // Simple crypto configuration
    const CRYPTO_CONFIG = {
      currencies: {
        'USDT': {
          name: 'Tether (USDT)',
          symbol: 'USDT',
          network: 'TRC20',
          icon: 'https://cryptologos.cc/logos/tether-usdt-logo.png',
          rate: 1.0
        },
        'USDC': {
          name: 'USD Coin (USDC)',
          symbol: 'USDC', 
          network: 'TRC20',
          icon: 'https://cryptologos.cc/logos/usd-coin-usdc-logo.png',
          rate: 1.0
        },
        'BTC': {
          name: 'Bitcoin (BTC)',
          symbol: 'BTC',
          network: 'Bitcoin',
          icon: 'https://cryptologos.cc/logos/bitcoin-btc-logo.png',
          rate: 0.0
        },
        'ETH': {
          name: 'Ethereum (ETH)',
          symbol: 'ETH',
          network: 'Ethereum',
          icon: 'https://cryptologos.cc/logos/ethereum-eth-logo.png',
          rate: 0.0
        }
      },
      addresses: {
        'USDT': 'TKbgFCRNwJ7R8XNVUzP7472n5tGuaiqoD7',
        'USDC': 'TKbgFCRNwJ7R8XNVUzP7472n5tGuaiqoD7',
        'BTC': '1YourBTCAddressHere123456789',
        'ETH': '0xYourETHAddressHere123456789'
      }
    };

    // Global variables
    let currentPrice = 29.00;
    let selectedCrypto = null;

    // Debug function
    function updateDebugInfo(message) {
      const debugEl = document.getElementById('debug-info');
      if (debugEl) {
        debugEl.innerHTML += `<div>${new Date().toLocaleTimeString()}: ${message}</div>`;
      }
      console.log(message);
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      updateDebugInfo('âœ… Page loaded');
      
      // Initialize crypto options
      initializeCryptoOptions();
      
      // Setup event listeners
      setupEventListeners();
      
      updateDebugInfo('âœ… Page initialized');
    });

    // Initialize crypto options
    function initializeCryptoOptions() {
      updateDebugInfo('ðŸ”§ Initializing crypto options...');
      
      const container = document.getElementById('crypto-options');
      if (!container) {
        updateDebugInfo('âŒ crypto-options container not found');
        return;
      }
      
      updateDebugInfo(`âœ… Found ${Object.keys(CRYPTO_CONFIG.currencies).length} currencies`);
      
      // Clear container first
      container.innerHTML = '';
      
      Object.entries(CRYPTO_CONFIG.currencies).forEach(([key, crypto]) => {
        updateDebugInfo(`Adding crypto option: ${key}`);
        
        const option = document.createElement('div');
        option.className = 'p-3 border border-slate-200 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-colors crypto-option';
        option.dataset.crypto = key;
        
        option.innerHTML = `
          <div class="flex items-center gap-3">
            <div class="w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center">
              <span class="text-orange-600 font-bold text-xs">${crypto.symbol[0]}</span>
            </div>
            <div>
              <div class="font-medium text-slate-900">${crypto.name}</div>
              <div class="text-sm text-slate-600">${crypto.network}</div>
            </div>
          </div>
        `;
        
        option.addEventListener('click', () => {
          updateDebugInfo(`ðŸ”§ Crypto clicked: ${key}`);
          selectCrypto(key);
        });
        
        container.appendChild(option);
      });
      
      updateDebugInfo(`âœ… Added ${container.children.length} crypto options`);
    }

    // Select crypto
    function selectCrypto(cryptoKey) {
      updateDebugInfo(`ðŸ”§ Selecting crypto: ${cryptoKey}`);
      
      // Remove previous selection
      document.querySelectorAll('.crypto-option').forEach(opt => {
        opt.classList.remove('border-blue-500', 'bg-blue-50');
        opt.classList.add('border-slate-200');
      });
      
      // Select new crypto
      const option = document.querySelector(`[data-crypto="${cryptoKey}"]`);
      if (option) {
        option.classList.add('border-blue-500', 'bg-blue-50');
        option.classList.remove('border-slate-200');
        updateDebugInfo(`âœ… Crypto option selected: ${cryptoKey}`);
      } else {
        updateDebugInfo(`âŒ Crypto option not found: ${cryptoKey}`);
        return;
      }
      
      selectedCrypto = cryptoKey;
      showPaymentDetails();
    }

    // Show payment details
    function showPaymentDetails() {
      if (!selectedCrypto) {
        updateDebugInfo('âŒ No crypto selected');
        return;
      }
      
      updateDebugInfo(`ðŸ”§ Showing payment details for: ${selectedCrypto}`);
      
      const crypto = CRYPTO_CONFIG.currencies[selectedCrypto];
      const address = CRYPTO_CONFIG.addresses[selectedCrypto];
      
      if (!crypto) {
        updateDebugInfo(`âŒ Crypto config not found for: ${selectedCrypto}`);
        return;
      }
      
      updateDebugInfo(`ðŸ”§ Crypto config: ${JSON.stringify(crypto)}`);
      updateDebugInfo(`ðŸ”§ Address: ${address}`);
      
      // Update payment info
      const amountEl = document.getElementById('crypto-amount');
      const networkEl = document.getElementById('crypto-network');
      const rateEl = document.getElementById('exchange-rate');
      const addressEl = document.getElementById('wallet-address');
      const detailsEl = document.getElementById('payment-details');
      
      if (amountEl) {
        amountEl.textContent = `${currentPrice.toFixed(2)} ${crypto.symbol}`;
        updateDebugInfo('âœ… Amount updated');
      } else {
        updateDebugInfo('âŒ crypto-amount element not found');
      }
      
      if (networkEl) {
        networkEl.textContent = crypto.network;
        updateDebugInfo('âœ… Network updated');
      } else {
        updateDebugInfo('âŒ crypto-network element not found');
      }
      
      if (rateEl) {
        rateEl.textContent = `1 ${crypto.symbol} = $1.00`;
        updateDebugInfo('âœ… Exchange rate updated');
      } else {
        updateDebugInfo('âŒ exchange-rate element not found');
      }
      
      if (addressEl) {
        addressEl.value = address;
        updateDebugInfo('âœ… Address updated');
      } else {
        updateDebugInfo('âŒ wallet-address element not found');
      }
      
      // Show payment details
      if (detailsEl) {
        detailsEl.classList.remove('hidden');
        updateDebugInfo('âœ… Payment details shown');
      } else {
        updateDebugInfo('âŒ payment-details element not found');
      }
    }

    // Setup event listeners
    function setupEventListeners() {
      // Copy address button
      const copyBtn = document.getElementById('copy-address');
      if (copyBtn) {
        copyBtn.addEventListener('click', function() {
          const address = document.getElementById('wallet-address');
          if (address) {
            address.select();
            document.execCommand('copy');
            updateDebugInfo('âœ… Address copied');
            
            const button = this;
            const originalText = button.textContent;
            button.textContent = 'Copied!';
            button.classList.add('bg-green-600');
            
            setTimeout(() => {
              button.textContent = originalText;
              button.classList.remove('bg-green-600');
            }, 2000);
          }
        });
      }
      
      // Check payment button
      const checkBtn = document.getElementById('check-payment');
      if (checkBtn) {
        checkBtn.addEventListener('click', function() {
          updateDebugInfo('ðŸ”§ Payment check clicked');
          showPaymentStatus();
        });
      }
      
      // Continue simulator button
      const continueBtn = document.getElementById('continue-simulator');
      if (continueBtn) {
        continueBtn.addEventListener('click', function() {
          updateDebugInfo('ðŸ”§ Continue to simulator clicked');
          window.location.href = '/ux-sim-simple.html';
        });
      }
    }

    // Show payment status
    function showPaymentStatus() {
      updateDebugInfo('ðŸ”§ Showing payment status');
      const continueBtn = document.getElementById('continue-simulator');
      if (continueBtn) {
        continueBtn.classList.remove('hidden');
        updateDebugInfo('âœ… Continue button shown');
      }
    }
  </script>
</body>
</html>

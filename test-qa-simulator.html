<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test QA Simulator Access</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 min-h-screen flex items-center justify-center">
    <div class="max-w-md w-full bg-white rounded-2xl shadow-card p-8 border border-slate-100 text-center">
        <h1 class="text-2xl font-bold text-slate-900 mb-6">ðŸ§ª Test QA Simulator Access</h1>
        
        <p class="text-slate-700 mb-6">Use these buttons to manage test access for the QA Automation Engineer Simulator.</p>
        
        <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6">
            <h3 class="font-semibold text-blue-900 mb-2">ðŸ’¡ What's New</h3>
            <ul class="text-blue-800 text-sm space-y-1">
                <li>â€¢ Added name input for personalized experience</li>
                <li>â€¢ Added helpful hints for each question</li>
                <li>â€¢ Updated dialogues to use your name</li>
                <li>â€¢ Enhanced user guidance throughout the simulation</li>
            </ul>
        </div>
        
        <div class="space-y-4">
            <button id="grantAccess" class="w-full bg-orange-600 text-white py-3 px-6 rounded-xl font-semibold text-lg hover:bg-orange-700 transition-colors duration-200 shadow-lg">
                Grant Test Access
            </button>
            <button id="openSimulator" class="w-full bg-blue-600 text-white py-3 px-6 rounded-xl font-semibold text-lg hover:bg-blue-700 transition-colors duration-200 shadow-lg">
                Open QA Simulator
            </button>
            <button id="clearAccess" class="w-full bg-red-600 text-white py-3 px-6 rounded-xl font-semibold text-lg hover:bg-red-700 transition-colors duration-200 shadow-lg">
                Clear Test Access
            </button>
        </div>
        
        <p id="statusMessage" class="mt-6 text-sm text-slate-600"></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const simulatorKey = 'qa-engineer';
            const userEmail = 'test@profpilot.co'; // Use a dummy email for testing
            const statusMessage = document.getElementById('statusMessage');

            function updateStatus(message, type = 'info') {
                statusMessage.textContent = message;
                statusMessage.className = `mt-6 text-sm ${type === 'error' ? 'text-red-600' : 'text-slate-600'}`;
            }

            document.getElementById('grantAccess').addEventListener('click', function() {
                const testPaymentData = {
                    simulator: simulatorKey,
                    email: userEmail,
                    accessGranted: true,
                    paymentId: 'TEST_QA_ACCESS_' + Date.now()
                };
                localStorage.setItem('testPaymentData', JSON.stringify(testPaymentData));
                updateStatus(`Test access granted for ${simulatorKey}. You can now open the simulator.`);
            });

            document.getElementById('openSimulator').addEventListener('click', function() {
                window.open(`/qa-engineer-simulator.html`, '_blank');
            });

            document.getElementById('clearAccess').addEventListener('click', function() {
                localStorage.removeItem('testPaymentData');
                updateStatus('Test access cleared. Simulator will now require payment.');
            });

            // Initial check
            const storedData = localStorage.getItem('testPaymentData');
            if (storedData) {
                const parsedData = JSON.parse(storedData);
                if (parsedData.simulator === simulatorKey && parsedData.accessGranted) {
                    updateStatus(`Test access is currently active for ${simulatorKey}.`);
                } else {
                    updateStatus('No active test access for QA Simulator.');
                }
            } else {
                updateStatus('No test access found in localStorage.');
            }
        });
    </script>
</body>
</html>

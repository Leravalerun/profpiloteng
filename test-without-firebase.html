<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Without Firebase - ProfPilot</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 min-h-screen">
  <div class="max-w-4xl mx-auto px-4 py-8">
    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
      <h1 class="text-2xl font-bold text-slate-900 mb-6">üß™ –¢–µ—Å—Ç –±–µ–∑ Firebase</h1>
      
      <div class="mb-6">
        <h2 class="text-lg font-semibold text-slate-900 mb-3">–ü—Ä–æ–≤–µ—Ä–∏–º, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑ Firebase:</h2>
        
        <div class="space-y-4">
          <button id="test-localStorage" class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
            –¢–µ—Å—Ç localStorage
          </button>
          
          <button id="test-payment-flow" class="bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors">
            –¢–µ—Å—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
          </button>
          
          <button id="test-simulator-access" class="bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors">
            –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏–º—É–ª—è—Ç–æ—Ä—É
          </button>
        </div>
      </div>
      
      <div id="results" class="space-y-2">
        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ -->
      </div>
      
      <div class="mt-6 p-4 bg-slate-100 rounded-lg">
        <h3 class="font-semibold text-slate-900 mb-2">–í—ã–≤–æ–¥:</h3>
        <div id="conclusion" class="text-slate-600">
          –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ, —á—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É
        </div>
      </div>
    </div>
  </div>

  <script>
    const resultsDiv = document.getElementById('results');
    const conclusionDiv = document.getElementById('conclusion');
    
    function addResult(message, type = 'info') {
      const div = document.createElement('div');
      div.className = `p-3 rounded-lg ${
        type === 'success' ? 'bg-green-50 text-green-700 border border-green-200' :
        type === 'error' ? 'bg-red-50 text-red-700 border border-red-200' :
        type === 'warning' ? 'bg-yellow-50 text-yellow-700 border border-yellow-200' :
        'bg-blue-50 text-blue-700 border border-blue-200'
      }`;
      div.textContent = message;
      resultsDiv.appendChild(div);
    }
    
    // –¢–µ—Å—Ç localStorage
    document.getElementById('test-localStorage').addEventListener('click', function() {
      addResult('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º localStorage...', 'info');
      
      try {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const testData = {
          userId: 'test@example.com',
          simulator: 'ux-designer',
          amount: 29.00,
          status: 'confirmed',
          timestamp: new Date().toISOString()
        };
        
        localStorage.setItem('paymentData', JSON.stringify(testData));
        addResult('‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage', 'success');
        
        // –ß–∏—Ç–∞–µ–º –¥–∞–Ω–Ω—ã–µ
        const savedData = JSON.parse(localStorage.getItem('paymentData'));
        if (savedData.userId === 'test@example.com') {
          addResult('‚úÖ –î–∞–Ω–Ω—ã–µ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã –∏–∑ localStorage', 'success');
        } else {
          addResult('‚ùå –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö', 'error');
        }
        
        // –û—á–∏—â–∞–µ–º
        localStorage.removeItem('paymentData');
        addResult('‚úÖ –î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã', 'success');
        
      } catch (error) {
        addResult(`‚ùå –û—à–∏–±–∫–∞ localStorage: ${error.message}`, 'error');
      }
    });
    
    // –¢–µ—Å—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
    document.getElementById('test-payment-flow').addEventListener('click', function() {
      addResult('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É...', 'info');
      
      try {
        // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã
        const paymentData = {
          userId: 'test@example.com',
          simulator: 'ux-designer',
          amount: 29.00,
          currency: 'USD',
          status: 'confirmed',
          timestamp: new Date().toISOString()
        };
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
        localStorage.setItem('paymentData', JSON.stringify(paymentData));
        addResult('‚úÖ –ü–ª–∞—Ç–µ–∂ —Å–æ—Ö—Ä–∞–Ω–µ–Ω', 'success');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø
        const access = checkAccess('ux-designer', 'test@example.com');
        if (access) {
          addResult('‚úÖ –î–æ—Å—Ç—É–ø –∫ —Å–∏–º—É–ª—è—Ç–æ—Ä—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω', 'success');
        } else {
          addResult('‚ùå –î–æ—Å—Ç—É–ø –∫ —Å–∏–º—É–ª—è—Ç–æ—Ä—É –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω', 'error');
        }
        
      } catch (error) {
        addResult(`‚ùå –û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã: ${error.message}`, 'error');
      }
    });
    
    // –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏–º—É–ª—è—Ç–æ—Ä—É
    document.getElementById('test-simulator-access').addEventListener('click', function() {
      addResult('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø –∫ —Å–∏–º—É–ª—è—Ç–æ—Ä—É...', 'info');
      
      try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø
        const access = checkAccess('ux-designer', 'test@example.com');
        if (access) {
          addResult('‚úÖ –î–æ—Å—Ç—É–ø –∫ —Å–∏–º—É–ª—è—Ç–æ—Ä—É –µ—Å—Ç—å', 'success');
          addResult('‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–º—É–ª—è—Ç–æ—Ä', 'success');
        } else {
          addResult('‚ùå –î–æ—Å—Ç—É–ø–∞ –∫ —Å–∏–º—É–ª—è—Ç–æ—Ä—É –Ω–µ—Ç', 'error');
          addResult('‚ÑπÔ∏è –ù—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –æ–ø–ª–∞—Ç–∏—Ç—å', 'info');
        }
        
      } catch (error) {
        addResult(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞: ${error.message}`, 'error');
      }
    });
    
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞
    function checkAccess(simulator, email) {
      try {
        const paymentData = localStorage.getItem('paymentData');
        if (!paymentData) return false;
        
        const data = JSON.parse(paymentData);
        return data.simulator === simulator && 
               data.userId === email && 
               data.status === 'confirmed';
      } catch (error) {
        return false;
      }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–≤–æ–¥
    function updateConclusion() {
      const results = resultsDiv.children;
      let successCount = 0;
      let errorCount = 0;
      
      for (let i = 0; i < results.length; i++) {
        if (results[i].className.includes('text-green-700')) {
          successCount++;
        } else if (results[i].className.includes('text-red-700')) {
          errorCount++;
        }
      }
      
      if (successCount > 0 && errorCount === 0) {
        conclusionDiv.innerHTML = '‚úÖ <strong>–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Firebase!</strong><br>–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å localStorage –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.';
      } else if (errorCount > 0) {
        conclusionDiv.innerHTML = '‚ùå <strong>–ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–∏—Å—Ç–µ–º–æ–π.</strong><br>–ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏.';
      } else {
        conclusionDiv.innerHTML = '‚ÑπÔ∏è <strong>–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã</strong>, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É.';
      }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–≤–æ–¥ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–µ
    const observer = new MutationObserver(updateConclusion);
    observer.observe(resultsDiv, { childList: true });
  </script>
</body>
</html>
